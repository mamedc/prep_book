<!DOCTYPE html>
<html>
<head>

	<style>

		body {
			background-color: #ede0ca;
		}
		
		.aligncenter {
		    text-align: center;
		}

		.div1 {
			text-align: center;
			border: 1px solid black;
			padding: 25px 0px 25px 0px;"
		}

        .input1 {
        	height: 40px;
 			width: 465px;
 			padding:0 15px;
		}


		.row {	
			display: flex;
			padding: 25px 0px 25px 0px;
			border: 1px solid red;
		}

		.first-column {
		    flex: 0 0 350px;
		    float: left;
		    border: 1px solid green;
		}

		.second-column {
		    flex: 1 1 350px;
		    float: right;
		    border: 1px solid cyan;
		    padding: 0px 0px 0px 10px;
		}

        .input2 {
        	width: 97%;
        	height: 30px;
        	padding: 0px 0px 0px 10px;
		}

		label, .input2 {
		    display: block;
		}

		label {
		    margin-bottom: 10px;
		}

		textarea {
        	width: 97%;
        	height: 400px;
        	padding: 10px 0px 0px 10px;
		}

		.form-inline {
			display: table;
		}

	 </style>


	<script type="text/javascript">

		window.onload = function(){

			var canvas = document.getElementById('demo'),
			    ctx = canvas.getContext('2d'),
			    line = new Line(ctx),
			    img = new Image;
			
			ctx.strokeStyle = '#eb4034'; ctx.lineWidth = 2;
			
			function Line(ctx) {
			    var me = this;
			    this.x1 = 0; this.x2 = 0; this.y1 = 0; this.y2 = 0;
			    this.draw = function() {
			        ctx.beginPath();
			        ctx.moveTo(me.x1, me.y1);
			        ctx.lineTo(me.x2, me.y2);
			        ctx.stroke();
			    }
			}
			
			img.onload = start;
			img.src = "{{ current_img_path }}";

			function start() {
			    ctx.drawImage(img, 0, 0, demo.width, demo.height);
			    canvas.onmousemove = updateLine;
			}

			function updateLine(e) {
			    var r = canvas.getBoundingClientRect(),
			        x = e.clientX - r.left,
			        y = e.clientY - r.top;
			    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
			    line.x1 = x;
			    line.y1 = 0;
			    line.x2 = x;
			    line.y2 = canvas.height;
			    line.draw();
			}

			// Mouse click
			var canvas = document.getElementById('demo');
	        canvas.addEventListener('mousedown', getPosition, false);
		}

		function getPosition(event) {
	    	var x = new Number();
	        var y = new Number();
	        var canvas = document.getElementById('demo');

			x = event.x;
	        y = event.y; 
	        x -= canvas.offsetLeft;
	        y -= canvas.offsetTop;

	        // Send value to aux form and submit
	        document.getElementById('trim_input').value = x;
	        document.getElementById('submit_btn').click(); 
		}
	</script>

	<title>Inspect Recipe</title>
</head>

<body>

{% load static %}

<h2 class="aligncenter">Inspect recipe - {{ recipe_id }}</h2>

<!-- Header -->
<div class="div1">	
	<img src="{% static header_img %}" width=500 border="1"><br>
	
	<form id="header_form" method="post">
		{% csrf_token %}
		<input class="input1" id="header_txt" type="text" name="header_txt" value="{{ ocr_dict.header_txt }}">
	</form>
</div>

<!-- Footer (pg number) -->
<div class="div1">	
	<img src="{% static footer_img %}" width=500 border="1"><br>
	
	<form id="header_form" method="post">
		{% csrf_token %}
		<input class="input1" id="proc_input_0" type="text" name="footer_txt" value="{{ ocr_dict.footer_txt }}">
	</form>
</div>

<!-- Recipe name and procedure -->
<div class="row">	
	<div class="first-column">
		<img src="{% static proc_img %}" width=350 border="1">
	</div>

	<div class="second-column">
		<form id="header_form" method="post">
			{% csrf_token %}
			<label>Recipe name:
				<input class="input2" type="text" name="recipe_name" value="{{ ocr_dict.recipe_name }}">
			</label>
			<label>Procedure:
				<textarea name="textarea">{{ ocr_dict.proc_txt }}</textarea>
			</label>
		</form>
	</div>
</div>





<!-- Recipe name and procedure -->
<div class="row">	
	<div class="first-column">
		<img src="{% static ingr_img %}" width=350 border="1">
	</div>

	<div class="second-column">
		<form id="header_form" method="post">
			{% csrf_token %}
			
			<label>Recipe name italian:
				<input class="input2" type="text" name="recipe_name" value="{{ ocr_dict.rec_name_ita }}">
			</label>
			<label>Yield:
				<input class="input2" type="text" name="recipe_name" value="{{ ocr_dict.rec_yield }}">
			</label>
			

			<label>Ingredients:
				{% for i in ingrs_strpd %}
					<div class="form-inline">
						<input type="text" name="ingr_" value="{{ i.amount_string }}">
						<input type="text" name="ingr_" value="{{ i.found_item }}">
						<input type="text" name="ingr_" value="{{ i.ingr_item_strpd }}">			
					</div>
				{% endfor %}
			</label>


		</form>
	</div>
</div>







<!--button id="submit_btn" type="submit" form="form1" style="display: none;" value="Submit">Submit</button-->


</body>
</html>


